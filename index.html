import { useState } from "react";
import { motion, AnimatePresence } from "framer-motion";

export default function App() {
  const [seccion, setSeccion] = useState("inicio");

  // Datos de los supermercados
  const productos = [
    {
      supermercado: "Xtra",
      producto: "Arroz",
      marca: "Pelín",
      peso: "5 lb",
      precio: 3.65,
    },
    {
      supermercado: "Xtra",
      producto: "Arroz",
      marca: "Arrosísimo",
      peso: "5 lb",
      precio: 3.40,
    },
    {
      supermercado: "Xtra",
      producto: "Azúcar morena",
      marca: "Like",
      peso: "2 lb",
      precio: 1.24,
    },
    {
      supermercado: "Xtra",
      producto: "Aceite vegetal",
      marca: "Pabo",
      peso: "1.5 L",
      precio: 3.41,
    },
    {
      supermercado: "Xtra",
      producto: "Leche en polvo",
      marca: "Klim",
      peso: "360 g",
      precio: 3.40,
    },
    {
      supermercado: "Xtra",
      producto: "Leche UHT",
      marca: "Estrella Azul",
      peso: "1 L",
      precio: 1.57,
    },
    {
      supermercado: "Xtra",
      producto: "Pollo entero",
      marca: "Panamá",
      peso: "1 kg",
      precio: 2.10,
    },
    {
      supermercado: "Xtra",
      producto: "Ñame Diamante",
      marca: "Diamante",
      peso: "1 kg",
      precio: 1.40,
    },
    {
      supermercado: "Xtra",
      producto: "Guineo",
      marca: "Nacional",
      peso: "1 kg",
      precio: 1.00,
    },
    {
      supermercado: "Xtra",
      producto: "Papa Nacional",
      marca: "Nacional",
      peso: "1 kg",
      precio: 1.20,
    },
    {
      supermercado: "Xtra",
      producto: "Cebolla amarilla",
      marca: "Nacional",
      peso: "1 kg",
      precio: 1.50,
    },
    // Productos de El Rey
    {
      supermercado: "Rey",
      producto: "Arroz",
      marca: "Arrosísimo",
      peso: "5 lb",
      precio: 3.49,
    },
    {
      supermercado: "Rey",
      producto: "Arroz",
      marca: "Pelín",
      peso: "5 lb",
      precio: 3.70,
    },
    {
      supermercado: "Rey",
      producto: "Azúcar morena",
      marca: "La Victoria",
      peso: "2 lb",
      precio: 1.40,
    },
    {
      supermercado: "Rey",
      producto: "Aceite vegetal",
      marca: "Pabo",
      peso: "1.5 L",
      precio: 3.45,
    },
    {
      supermercado: "Rey",
      producto: "Leche en polvo",
      marca: "Superior",
      peso: "360 g",
      precio: 3.45,
    },
    {
      supermercado: "Rey",
      producto: "Leche UHT",
      marca: "Estrella Azul",
      peso: "1 L",
      precio: 1.73,
    },
    {
      supermercado: "Rey",
      producto: "Pollo entero",
      marca: "Panamá",
      peso: "1 kg",
      precio: 5.68,
    },
    {
      supermercado: "Rey",
      producto: "Ñame Diamante",
      marca: "Diamante",
      peso: "1 kg",
      precio: 1.95,
    },
    {
      supermercado: "Rey",
      producto: "Guineo",
      marca: "Nacional",
      peso: "1 kg",
      precio: 1.09,
    },
    {
      supermercado: "Rey",
      producto: "Papa Nacional",
      marca: "Nacional",
      peso: "1 kg",
      precio: 1.75,
    },
    {
      supermercado: "Rey",
      producto: "Cebolla amarilla",
      marca: "Nacional",
      peso: "1 kg",
      precio: 2.55,
    },
    // Productos Super 99
    {
      supermercado: "99",
      producto: "Arroz",
      marca: "Pelín",
      peso: "5 lb",
      precio: 3.89,
    },
    {
      supermercado: "99",
      producto: "Arroz",
      marca: "Premier",
      peso: "5 lb",
      precio: 3.25,
    },
    {
      supermercado: "99",
      producto: "Azúcar morena",
      marca: "La Victoria",
      peso: "2 lb",
      precio: 1.35,
    },
    {
      supermercado: "99",
      producto: "Aceite vegetal",
      marca: "Hidden Park",
      peso: "1.5 L",
      precio: 2.49,
    },
    {
      supermercado: "99",
      producto: "Leche en polvo",
      marca: "Cask",
      peso: "360 g",
      precio: 3.79,
    },
    {
      supermercado: "99",
      producto: "Leche UHT",
      marca: "Nevada",
      peso: "1 L",
      precio: 1.69,
    },
    {
      supermercado: "99",
      producto: "Pollo entero",
      marca: "Panamá",
      peso: "1 kg",
      precio: 2.60,
    },
    {
      supermercado: "99",
      producto: "Ñame Diamante",
      marca: "Diamante",
      peso: "1 kg",
      precio: 0.88,
    },
    {
      supermercado: "99",
      producto: "Guineo",
      marca: "Nacional",
      peso: "1 kg",
      precio: 1.05,
    },
    {
      supermercado: "99",
      producto: "Papa Nacional",
      marca: "Nacional",
      peso: "1 kg",
      precio: 1.29,
    },
    {
      supermercado: "99",
      producto: "Cebolla amarilla",
      marca: "Nacional",
      peso: "1 kg",
      precio: 1.99,
    },
  ];

  // Filtrar productos por supermercado
  const filtrarPorSuper = (supermercado) => {
    return productos.filter((p) => p.supermercado === supermercado);
  };

  // Animación de filas
  const rowVariants = {
    hidden: { opacity: 0, y: -10 },
    visible: { opacity: 1, y: 0 },
  };

  return (
    <div className="p-4 font-sans bg-white">
      {/* Título y subtítulo centrados */}
      <div className="text-center mb-6">
        <h1 className="text-4xl font-bold text-red-600 mb-2">EcoCompra</h1>
        <p className="text-lg text-gray-700">
          Nos encargamos de que tú, consumidor panameño, estés informado en todo
          momento del costo de la vida en nuestro país
        </p>
      </div>

      {/* Botones principales */}
      <div className="flex justify-center gap-4 mb-8">
        <button
          onClick={() => setSeccion("Xtra")}
          className="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 transition"
        >
          Xtra
        </button>
        <button
          onClick={() => setSeccion("Rey")}
          className="bg-yellow-500 text-white px-4 py-2 rounded hover:bg-yellow-600 transition"
        >
          Rey
        </button>
        <button
          onClick={() => setSeccion("99")}
          className="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 transition"
        >
          99
        </button>
        <button
          onClick={() => setSeccion("todos")}
          className="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition"
        >
          Infórmate
        </button>
      </div>

      {/* Sección productos */}
      <AnimatePresence mode="wait">
        {seccion && (
          <motion.div
            key={seccion}
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            transition={{ duration: 0.5 }}
          >
            {/* Introducción para la tabla general */}
            {seccion === "todos" && (
              <div className="mb-4 text-center">
                <p className="font-semibold mb-2">
                  Productos de la canasta básica con mayor índice de consumo por
                  parte de las familias panameñas:
                </p>
                <p>
                  Arroz | Azúcar morena | Aceite vegetal | Leche en polvo
                  entera instantánea | Leche fresca pasteurizada UHT | Pollo
                  entero sin plumas | Ñame Diamante | Guineo | Papa nacional |
                  Cebolla amarilla
                </p>
              </div>
            )}

            {/* Tabla */}
            <table className="min-w-full border-collapse border border-gray-300 mb-8">
              <thead>
                <tr className="bg-gray-100">
                  <th className="border border-gray-300 px-4 py-2">Super</th>
                  <th className="border border-gray-300 px-4 py-2">Producto</th>
                  <th className="border border-gray-300 px-4 py-2">Marca</th>
                  <th className="border border-gray-300 px-4 py-2">Peso</th>
                  <th className="border border-gray-300 px-4 py-2">Precio (B/.)</th>
                </tr>
              </thead>
              <tbody>
                <AnimatePresence>
                  {((seccion === "todos" && productos) ||
                    filtrarPorSuper(seccion)).map((p, index) => (
                    <motion.tr
                      key={index}
                      variants={rowVariants}
                      initial="hidden"
                      animate="visible"
                      exit="hidden"
                      transition={{ duration: 0.3, delay: index * 0.05 }}
                      className="hover:bg-yellow-100 cursor-pointer"
                    >
                      <td className="border border-gray-300 px-4 py-2">
                        {p.supermercado}
                      </td>
                      <td className="border border-gray-300 px-4 py-2">
                        {p.producto}
                      </td>
                      <td className="border border-gray-300 px-4 py-2">
                        {p.marca}
                      </td>
                      <td className="border border-gray-300 px-4 py-2">
                        {p.peso}
                      </td>
                      <td className="border border-gray-300 px-4 py-2">
                        {p.precio.toFixed(2)}
                      </td>
                    </motion.tr>
                  ))}
                </AnimatePresence>
              </tbody>
            </table>
          </motion.div>
        )}
      </AnimatePresence>
    </div>
  );
}
